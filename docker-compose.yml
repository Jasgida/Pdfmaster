version: "3.9"


services:

  backend:

    build:

      context: .

      dockerfile: backend/Dockerfile

    container_name: pdfmaster-backend

    env_file:

      - backend/.env

    ports:

      - "5000:5000"

    volumes:

      - ./backend/uploads:/app/uploads

    restart: unless-stopped


  frontend:

    build:

      context: .

      dockerfile: frontend/Dockerfile

    container_name: pdfmaster-frontend

    restart: unless-stopped


  nginx:

    image: nginx:alpine

    container_name: pdfmaster-nginx

    ports:

      - "80:80"

    volumes:

      - ./nginx.conf:/etc/nginx/conf.d/default.conf

      - ./dist:/usr/share/nginx/html

    depends_on:

      - backend

      - frontend

    restart: unless-stopped


  mongo:

    image: mongo:6

    container_name: pdfmaster-mongo

    ports:

      - "27017:27017"

    volumes:

      - mongo-data:/data/db

    restart: unless-stopped


volumes:

  mongo-data:

